/*!
 * jQuery triangle-menu Plugin v0.1.2
 * Released: 2013-12-28
 * jQuery plugin that creates a dynamic menu with a triangle pointer based on clip-path
 * https://github.com/andrusieczko/triangle-menu
 * 
 * Copyright 2013 Karol Andrusieczko
 * Released under MIT license
 */
var jQuery=jQuery||require&&require("jquery");(function(a){var b=function(a,b,c){this.$el=b,this.$=a,this._processOptions(b,c)};if("undefined"!=typeof exports)"undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.TriangleMenu=b;else{var c=window||root;c.TriangleMenu=b}b.prototype={$:null,$el:null,menuItemSelector:".menu-item",triangleWidth:50,triangleHeight:20,selectItem:function(a){var b=this.$el,c=this._createPolygonPoints(b,a);b.clipPath(c),this._colorIcons(b,this._getMenuItem(b,a)),b.trigger("activate",a)},_getMenuItem:function(a,b){return a.find(this.menuItemSelector+":nth-child("+b+")")},_createPolygonPoints:function(a,b){var c=a.width(),d=a.height(),e=this._getMenuItem(a,b),f=this._getCenterOfMenuItem(a,e),g=f-this.triangleWidth/2,h=f+this.triangleWidth/2;return this._buildPolygonPoints(f,g,h,c,d)},_buildPolygonPoints:function(a,b,c,d,e){var f=[[0,0],[b,0],[a,this.triangleHeight],[c,0],[d,0],[d,e],[0,e]];return f},_getCenterOfMenuItem:function(a,b){var c=parseInt(b.css("padding-left"),10),d=b.offset().left-a.offset().left+c,e=b.width(),f=d+e/2;return f},_colorIcons:function(a,b){a.find(this.menuItemSelector).removeClass("active"),b.addClass("active")},onHoverAction:function(a){var b=this.$(a.target);b.hasClass(this.menuItemSelector.substr(1))||(b=b.parents(this.menuItemSelector));var c=b.parent().children(this.menuItemSelector).index(b)+1;this.selectItem(c)},_isFunction:function(a){return"function"==typeof a},_processOptions:function(a,b){if(this.triangleHeight=b&&b.triangleHeight||this.triangleHeight,this.triangleWidth=b&&b.triangleWidth||this.triangleWidth,this.menuItemSelector=b&&b.menuItemSelector||this.menuItemSelector,b&&b.activate){if(!this._isFunction(b.activate))throw new Error("activate argument should be a function");a.on("activate",b.activate.bind(this))}}},a.fn.triangleMenu=function(c){return this.each(function(){var d=a(this),e=new b(a,d,c);d.find(e.menuItemSelector).bind("mouseover",e.onHoverAction.bind(e)),e.selectItem(1)})}}).call(this,jQuery);